{"version":3,"names":[],"mappings":"","sources":["startController.js"],"sourcesContent":["(function () {\r\n    'use strict';\r\n\r\n    app.controller('startController', startController);\r\n\r\n    startController.$inject = ['$scope', '$location', '$log', '$timeout', '$routeParams', 'authService', 'dataService', 'toaster'];\r\n\r\n    function startController($scope, $location, $log, $timeout, $routeParams, authService, dataService, toaster) {\r\n\r\n        var vm = this;\r\n\r\n        vm.things = [];\r\n        vm.query = $routeParams.query;\r\n        vm.jumbotronVideoUrlSetting = {};\r\n        vm.dataProperty = '';\r\n        vm.upVote = upVote;\r\n        vm.downVote = downVote;\r\n        vm.redBoxShadow = '0 0 1em rgb(148,62,15)';\r\n        vm.redFont = 'rgb(148,62,15)';\r\n        vm.greenBoxShadow = '0 0 1em rgb(57,118,40)';\r\n        vm.greenFont = 'rgb(57,118,40)';\r\n        vm.loggedInUser = {};\r\n        vm.itemsPerPage = 10\r\n\r\n        activate();\r\n\r\n        function activate() {\r\n            getMostMe2Things(vm.itemsPerPage);\r\n\r\n            if (authService.authentication.userName) {\r\n                getLoggedInUser();\r\n            }\r\n\r\n            return vm;\r\n        }\r\n\r\n        function getLoggedInUser() {\r\n            return dataService.getLoggedInUser().then(function (data) {\r\n                vm.loggedInUser = data;\r\n            });\r\n        }\r\n\r\n        function me2(thingId) {\r\n            if (!vm.loggedInUser) {\r\n                toaster.pop('error', 'Uh oh', 'Sorry you have to be logged in to do this.');\r\n\r\n                return;\r\n            }\r\n\r\n            toaster.pop('success', 'Done', 'You want it? You got it.  An email will be sent to you when this item is found in your city!');\r\n\r\n            return me2Service.me2(thingId).then(function (data) {\r\n                searchThings(vm.searchCriteria);\r\n            });\r\n        }\r\n\r\n        function getMostMe2Things(itemsPerPage) {\r\n            return dataService.getMostMe2Things(itemsPerPage).then(function (data) {\r\n                vm.things = data;\r\n\r\n                return vm.things;\r\n            });\r\n        }\r\n\r\n        function upVote(thing) {\r\n            var vote = {};\r\n\r\n            vote.userName = authService.authentication.userName;\r\n            vote.thingId = thing.thingId;\r\n\r\n            return dataService.upVote(vote).then(function (data) {\r\n                getMostMe2Things(vm.itemsPerPage);\r\n            });\r\n        }\r\n\r\n        function downVote(thing) {\r\n            var vote = {};\r\n\r\n            vote.userName = authService.authentication.userName;\r\n            vote.thingId = thing.thingId;\r\n\r\n            return dataService.downVote(vote).then(function (data) {\r\n                getMostMe2Things(vm.itemsPerPage);\r\n            });\r\n        }\r\n    }\r\n\r\n})();"],"file":"startController.js","sourceRoot":"/source/"}